"";Object.defineProperty(exports,"__esModule",{value:!0});var _regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_TileColumn=require("./TileColumn"),_TileColumn2=_interopRequireDefault(_TileColumn),_TileDialog=require("./TileDialog"),_TileDialog2=_interopRequireDefault(_TileDialog),_dialog=require("../dialog");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(r,l){try{var o=t[r](l),a=o.value}catch(e){return void i(e)}if(!o.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}("next")})}}exports.default={render:function anonymous(){with(this)return _c("div",{ref:"tileMenu",staticClass:"tile-menu"},[_c("div",{ref:"tileMenuWrapper",staticClass:"tile-menu-wrapper"},[_c("div",{ref:"beforeAnimation",staticClass:"before-animation"}),_v(" "),_l(tileMenuData,function(e,t){return _c("tile-column",{key:t,ref:"tileColumns",refInFor:!0,attrs:{"is-only-show-one":isOnlyShowOne,"tile-width":tileWidth,"tile-height":tileHeight,"tile-space":tileSpace,"tile-column-data":e,"tile-column-index":t,"is-expanded":t===currentColumnIndex},on:{itemClicked:onMenuItemClicked,widthChanged:moveIntoView}})}),_v(" "),_c("div",{ref:"afterAnimation",staticClass:"after-animation"})],2)])},name:"aui-tile-menu",props:{tileMenuData:Array,tileMenuConfig:Array},data:function(){return{result:void 0,currentColumnIndex:void 0,isOnlyShowOne:this.tileMenuConfig[0].isOnlyShowOne,tileWidth:this.tileMenuConfig[0].tileWidth,tileHeight:this.tileMenuConfig[0].tileHeight,tileSpace:this.tileMenuConfig[0].tileSpace,tileMenuWrapperLeft:void 0,tileMenuWrapperPaddingRight:void 0,bounceFlag:!1}},components:{TileColumn:_TileColumn2.default},mounted:function(){var e=this.$refs.tileMenuWrapper;this.tileMenuWrapperLeft=parseInt(window.getComputedStyle(e).left),this.tileMenuWrapperPaddingRight=parseInt(window.getComputedStyle(e).paddingRight),this.$refs.tileMenu.addEventListener("wheel",this.handleWheel),this.$refs.tileMenu.addEventListener("touchmove",this.handleTouchMove),this.$refs.tileMenu.addEventListener("touchend",this.handleTouchEnd)},methods:{handleWheel:function(e){this.$refs.tileMenu.scrollLeft=this.$refs.tileMenu.scrollLeft+e.deltaY/100*10},handleTouchMove:function(){var e=this.$refs.tileMenu,t=this.$refs.tileMenuWrapper,i=parseInt(window.getComputedStyle(e).width),n=parseInt(window.getComputedStyle(t).width),r=parseInt(window.getComputedStyle(t).left);if(0===this.$refs.tileMenu.scrollLeft)this.$refs.beforeAnimation.style.width="40px",this.bounceFlag=!0;else if(this.$refs.tileMenu.scrollLeft===n+r-i){this.$refs.afterAnimation.style.width="40px";setTimeout(function(){this.bounceFlag=!0},600)}else this.bounceFlag&&(this.$refs.beforeAnimation.style.width="0px",this.$refs.afterAnimation.style.width="0px",this.bounceFlag=!1)},handleTouchEnd:function(){this.$refs.beforeAnimation.style.width="0px",this.$refs.afterAnimation.style.width="0px",this.bounceFlag=!1},onMenuItemClicked:function(e){var t=this;return _asyncToGenerator(_regenerator2.default.mark(function i(){var n;return _regenerator2.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e[0],e[1],!(n=e[2]).children){i.next=15;break}i.t0=t.tileMenuConfig[0].secondLevelMenuType,i.next="DIALOG"===i.t0?7:"TILE"===i.t0?12:13;break;case 7:return i.next=9,_dialog.Dialog.showAwait(_TileDialog2.default,{dialogBoxContentArgs:{children:n.children,timerType:"shared"},closeContentModalRestPart:!0});case 9:return t.result=i.sent,t.result&&t.$emit("itemClicked",t.result),i.abrupt("break",13);case 12:t.$emit("itemClicked",n.children);case 13:i.next=16;break;case 15:t.$emit("itemClicked",n);case 16:case"end":return i.stop()}},i,t)}))()},moveIntoView:function(e){var t=e[0],i=e[1],n=parseInt(window.getComputedStyle(this.$refs.tileMenuWrapper).left),r=this.$refs.tileColumns[t].$el.getBoundingClientRect().left,l=parseInt(window.getComputedStyle(this.$refs.tileColumns[t].$el).width);if(e[2]){if(this.currentColumnIndex=void 0,r<0){var o=this.$refs.tileMenu.scrollLeft+r-n;$(".tile-menu").animate({scrollLeft:o},600)}}else if(this.currentColumnIndex=e[0],this.isOnlyShowOne){for(var a=0,s=0,u=0;u<=t;u++)a+=parseInt(window.getComputedStyle(this.$refs.tileColumns[u].$el).width),s=s+184*this.tileMenuData[u][0].layout[1]-1;var d=this.$refs.tileMenu.scrollLeft+r-a+s-n;$(".tile-menu").animate({scrollLeft:d},600)}else if(r<0||r>n){var f=this.$refs.tileMenu.scrollLeft+r-l+(184*this.tileMenuData[t][i].layout[1]-1)-n;$(".tile-menu").animate({scrollLeft:f},600)}}}};