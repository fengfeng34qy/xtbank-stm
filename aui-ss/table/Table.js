"";Object.defineProperty(exports,"__esModule",{value:!0});var _scrollControlMixin=require("./common/table/scroll-control-mixin.js"),_scrollControlMixin2=_interopRequireDefault(_scrollControlMixin),_frozenColumnsMixin=require("./common/table/frozen-columns-mixin.js"),_frozenColumnsMixin2=_interopRequireDefault(_frozenColumnsMixin),_tableResizeMixin=require("./common/table/table-resize-mixin.js"),_tableResizeMixin2=_interopRequireDefault(_tableResizeMixin),_sortControlMixin=require("./common/table/sort-control-mixin.js"),_sortControlMixin2=_interopRequireDefault(_sortControlMixin),_tableEmptyMixin=require("./common/table/table-empty-mixin.js"),_tableEmptyMixin2=_interopRequireDefault(_tableEmptyMixin),_cellEditMixin=require("./common/table/cell-edit-mixin.js"),_cellEditMixin2=_interopRequireDefault(_cellEditMixin),_cellMergeMixin=require("./common/table/cell-merge-mixin.js"),_cellMergeMixin2=_interopRequireDefault(_cellMergeMixin),_titleCellMergeMixin=require("./common/table/title-cell-merge-mixin.js"),_titleCellMergeMixin2=_interopRequireDefault(_titleCellMergeMixin),_utils=require("./common/utils/utils.js"),_utils2=_interopRequireDefault(_utils),_deepClone=require("./common/utils/deepClone.js"),_deepClone2=_interopRequireDefault(_deepClone),_TableEmpty=require("./common/table/TableEmpty"),_TableEmpty2=_interopRequireDefault(_TableEmpty),_Loading=require("./common/table/Loading"),_Loading2=_interopRequireDefault(_Loading);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.default={render:function anonymous(){with(this)return _c("div",{staticClass:"v-table-views v-table-class",style:{width:internalWidth+"px",height:getTableHeight+"px"}},[frozenCols.length>0?[_c("div",{staticClass:"v-table-leftview",style:{width:leftViewWidth+"px"}},[_c("div",{staticClass:"v-table-header v-table-title-class",style:{width:leftViewWidth+"px","background-color":titleBgColor}},[_c("div",{staticClass:"v-table-header-inner",staticStyle:{display:"block"}},[_c("table",{staticClass:"v-table-htable",attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[_c("tbody",[frozenTitleCols.length>0?_l(frozenTitleCols,function(e){return _c("tr",_l(e,function(t){return _c("td",{class:[t.titleCellClassName],attrs:{colspan:t.colspan,rowspan:dealTitleRowspan(e,t.rowspan)}},[_c("div",{class:["v-table-title-cell",showVerticalBorder?"vertical-border":"",showHorizontalBorder?"horizontal-border":""],style:{width:titleColumnWidth(t.fields)+"px",height:titleColumnHeight(t.rowspan)+"px","text-align":t.titleAlign}},[_c("span",{staticClass:"table-title"},[_c("span",{domProps:{innerHTML:_s(t.title)}}),_v(" "),enableSort(t.orderBy)?_c("span",{staticClass:"v-table-sort-icon",on:{click:function(e){e.stopPropagation(),sortControl(t.fields[0],t.orderBy)}}},[_c("i",{class:["aui-icon-angle1","asc"===t.orderBy?"checked":""]}),_v(" "),_c("i",{class:["aui-icon-angle","desc"===t.orderBy?"checked":""]})]):_e()])])])}))}):[_c("tr",{staticClass:"v-table-header-row"},_l(frozenCols,function(e){return _c("td",{class:[e.titleCellClassName]},[_c("div",{class:["v-table-title-cell",showVerticalBorder?"vertical-border":"",showHorizontalBorder?"horizontal-border":""],style:{width:e.width+"px",height:titleRowHeight+"px","text-align":e.titleAlign}},[_c("span",{staticClass:"table-title"},[_c("span",{domProps:{innerHTML:_s(e.title)}}),_v(" "),enableSort(e.orderBy)?_c("span",{staticClass:"v-table-sort-icon",on:{click:function(t){t.stopPropagation(),sortControl(e.field,e.orderBy)}}},[_c("i",{class:["aui-icon-angle1","asc"===e.orderBy?"checked":""]}),_v(" "),_c("i",{class:["aui-icon-angle","desc"===e.orderBy?"checked":""]})]):_e()])])])}))]],2)])])]),_v(" "),_c("div",{staticClass:"v-table-body v-table-body-class",style:{width:leftViewWidth+"px",height:bodyViewHeight+"px"}},[_c("div",{staticClass:"v-table-body-inner"},[_c("table",{staticClass:"v-table-btable",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[_c("tbody",_l(internalTableData,function(e,t){return _c("tr",{staticClass:"v-table-row",style:[trBgColor(t+1),setRowHoverColor(e.__mouseenter__),setRowClickColor(e.__columnCellClick__)],on:{mouseenter:function(e){e.stopPropagation(),handleMouseEnter(t)},mouseleave:function(e){e.stopPropagation(),handleMouseOut(t)}}},_l(frozenCols,function(i,l){return cellMergeInit(t,i.field,e,!0)?_c("td",{key:l,class:[setColumnCellClassName(t,i.field,e)],attrs:{colSpan:setColRowSpan(t,i.field,e).colSpan,rowSpan:setColRowSpan(t,i.field,e).rowSpan}},[isCellMergeRender(t,i.field,e)?_c("div",{class:["v-table-body-cell",showVerticalBorder?"vertical-border":"",showHorizontalBorder?"horizontal-border":""],style:{width:getRowWidthByColSpan(t,i.field,e)+"px",height:getRowHeightByRowSpan(t,i.field,e)+"px","line-height":getRowHeightByRowSpan(t,i.field,e)+"px","text-align":i.columnAlign},attrs:{title:i.overflowTitle?overflowTitle(e,i):""},on:{click:function(l){l.stopPropagation(),onCellClick(t,e,i),cellEditClick(l,i.isEdit,e,i.field,t)}}},[cellMergeContentType(t,i.field,e).isComponent?[_c(cellMerge(t,e,i.field).componentName,{tag:"component",attrs:{rowData:e,field:i.field?i.field:"",index:t},on:{"on-custom-comp":customCompFunc}})]:[_c("span",{domProps:{innerHTML:_s(cellMerge(t,e,i.field).content)}})]],2):_c("div",{class:["v-table-body-cell",showVerticalBorder?"vertical-border":"",showHorizontalBorder?"horizontal-border":""],style:{width:i.width+"px",height:rowHeight+"px","line-height":rowHeight+"px","text-align":i.columnAlign},attrs:{title:i.overflowTitle?overflowTitle(e,i):""},on:{click:function(l){l.stopPropagation(),onCellClick(t,e,i),cellEditClick(l,i.isEdit,e,i.field,t)}}},["string"==typeof i.componentName&&i.componentName.length>0?[_c(i.componentName,{tag:"component",attrs:{rowData:e,field:i.field?i.field:"",index:t},on:{"on-custom-comp":customCompFunc}})]:["function"==typeof i.formatter?_c("span",{domProps:{innerHTML:_s(i.formatter(e,t,pagingIndex,i.field))}}):_c("span",[_v("\n                        "+_s(e[i.field])+"\n                      ")])]],2)]):_e()}))}))])])])])]:_e(),_v(" "),_c("div",{staticClass:"v-table-rightview",style:{width:rightViewWidth+"px"}},[_c("div",{staticClass:"v-table-header v-table-title-class",style:{width:rightViewWidth-1+"px","background-color":titleBgColor}},[_c("div",{staticClass:"v-table-header-inner",staticStyle:{display:"block"}},[_c("table",{staticClass:"v-table-htable",attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[_c("tbody",[noFrozenTitleCols.length>0?_l(noFrozenTitleCols,function(e){return _c("tr",_l(e,function(t){return _c("td",{class:[t.titleCellClassName],attrs:{colspan:t.colspan,rowspan:dealTitleRowspan(e,t.rowspan)}},[_c("div",{class:["v-table-title-cell",showVerticalBorder?"vertical-border":"",showHorizontalBorder?"horizontal-border":""],style:{width:titleColumnWidth(t.fields)+"px",height:titleColumnHeight(t.rowspan)+"px","text-align":t.titleAlign}},[_c("span",{staticClass:"table-title"},[_c("span",{domProps:{innerHTML:_s(t.title)}}),_v(" "),enableSort(t.orderBy)?_c("span",{staticClass:"v-table-sort-icon",on:{click:function(e){e.stopPropagation(),sortControl(t.fields[0],t.orderBy)}}},[_c("i",{class:["aui-icon-angle1","asc"===t.orderBy?"checked":""]}),_v(" "),_c("i",{class:["aui-icon-angle","desc"===t.orderBy?"checked":""]})]):_e()])])])}))}):[_c("tr",{staticClass:"v-table-header-row"},_l(noFrozenCols,function(e,t){return _c("td",{class:[e.titleCellClassName]},[_c("div",{class:["v-table-title-cell",showVerticalBorder?"vertical-border":"",showHorizontalBorder?"horizontal-border":""],style:{width:e.width+"px",height:titleRowHeight+"px","text-align":e.titleAlign}},[_c("span",{staticClass:"table-title"},[_c("span",{domProps:{innerHTML:_s(e.title)}}),_v(" "),enableSort(e.orderBy)?_c("span",{staticClass:"v-table-sort-icon",on:{click:function(t){t.stopPropagation(),sortControl(e.field,e.orderBy)}}},[_c("i",{class:["aui-icon-angle1","asc"===e.orderBy?"checked":""]}),_v(" "),_c("i",{class:["aui-icon-angle","desc"===e.orderBy?"checked":""]})]):_e()])])])}))]],2)])])]),_v(" "),_c("div",{class:["v-table-body v-table-body-class",hasFrozenColumn?"":"v-table-rightview-special-border"],style:{width:rightViewWidth+"px",height:bodyViewHeight+"px"}},[_c("table",{staticClass:"v-table-btable",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[_c("tbody",_l(internalTableData,function(e,t){return _c("tr",{key:t,staticClass:"v-table-row",style:[trBgColor(t+1),setRowHoverColor(e.__mouseenter__),setRowClickColor(e.__columnCellClick__)],on:{mouseenter:function(e){e.stopPropagation(),handleMouseEnter(t)},mouseleave:function(e){e.stopPropagation(),handleMouseOut(t)}}},_l(noFrozenCols,function(i,l){return cellMergeInit(t,i.field,e,!1)?_c("td",{key:l,class:[setColumnCellClassName(t,i.field,e)],attrs:{colSpan:setColRowSpan(t,i.field,e).colSpan,rowSpan:setColRowSpan(t,i.field,e).rowSpan}},[isCellMergeRender(t,i.field,e)?_c("div",{class:["v-table-body-cell",showVerticalBorder?"vertical-border":"",showHorizontalBorder?"horizontal-border":""],style:{width:getRowWidthByColSpan(t,i.field,e)+"px",height:getRowHeightByRowSpan(t,i.field,e)+"px","line-height":getRowHeightByRowSpan(t,i.field,e)+"px","text-align":i.columnAlign},attrs:{title:i.overflowTitle?overflowTitle(e,i):""},on:{click:function(l){l.stopPropagation(),onCellClick(t,e,i),cellEditClick(l,i.isEdit,e,i.field,t)}}},[cellMergeContentType(t,i.field,e).isComponent?[_c(cellMerge(t,e,i.field).componentName,{tag:"component",attrs:{rowData:e,field:i.field?i.field:"",index:t},on:{"on-custom-comp":customCompFunc}})]:[_c("span",{domProps:{innerHTML:_s(cellMerge(t,e,i.field).content)}})]],2):_c("div",{class:["v-table-body-cell",showVerticalBorder?"vertical-border":"",showHorizontalBorder?"horizontal-border":""],style:{width:i.width+"px",height:rowHeight+"px","line-height":rowHeight+"px","text-align":i.columnAlign},attrs:{title:i.overflowTitle?overflowTitle(e,i):""},on:{click:function(l){l.stopPropagation(),onCellClick(t,e,i),cellEditClick(l,i.isEdit,e,i.field,t)}}},["string"==typeof i.componentName&&i.componentName.length>0?[_c(i.componentName,{tag:"component",attrs:{rowData:e,field:i.field?i.field:"",index:t},on:{"on-custom-comp":customCompFunc}})]:["function"==typeof i.formatter?_c("span",{domProps:{innerHTML:_s(i.formatter(e,t,pagingIndex,i.field))}}):_c("span",[_v("\n                    "+_s(e[i.field])+"\n                  ")])]],2)]):_e()}))}))])])]),_v(" "),isTableEmpty?_c("table-empty",{attrs:{width:internalWidth,totalColumnsWidth:totalColumnsWidth,contentHeight:errorContentHeight,titleHeight:getTotalColumnsHeight(),errorContent:errorContent,isLoading:isLoading}}):_e(),_v(" "),isLoading?_c("loading",{attrs:{loadingContent:loadingContent}}):_e()],2)},name:"aui-table",mixins:[_tableResizeMixin2.default,_frozenColumnsMixin2.default,_scrollControlMixin2.default,_sortControlMixin2.default,_tableEmptyMixin2.default,_cellEditMixin2.default,_cellMergeMixin2.default,_titleCellMergeMixin2.default],components:{tableEmpty:_TableEmpty2.default,loading:_Loading2.default},data:function(){return{internalTableData:[],internalWidth:0,internalHeight:0,internalColumns:[],internalTitleRows:[],errorMsg:" V-Table error: ",maxWidth:5e3,hasFrozenColumn:!1,hasBindScrollEvent:!1}},props:{width:[Number,String],minWidth:{type:Number,require:!1,default:50},height:{type:Number,require:!1},minHeight:{type:Number,require:!1,default:60},titleRowHeight:{type:Number,require:!1,default:60},isHorizontalResize:{type:Boolean,require:!1,default:!1},isVerticalResize:{type:Boolean,require:!1,default:!1},VerticalResizeOffset:{type:Number,default:0},titleBgColor:{type:String,require:!1,default:"#fff"},oddBgColor:{type:String,default:"#fff"},evenBgColor:{type:String},rowHeight:{type:Number,require:!1,default:60},multipleSort:{type:Boolean,require:!1,default:!0},columns:{type:Array,require:!0},titleRows:{type:Array,require:!0,default:function(){return[]}},tableData:{type:Array,require:!0,default:function(){return[]}},pagingIndex:Number,errorContent:{type:String,default:"暂无数据"},errorContentHeight:{type:Number,default:60},isLoading:{type:Boolean,default:!1},loadingContent:{type:String,default:'<span><i class="aui-icon-spinner animate-loading-23" style="font-size: 28px;opacity:0.6;"></i></span>'},rowHoverColor:{type:String},rowClickColor:{type:String},showVerticalBorder:{type:Boolean,default:!0},showHorizontalBorder:{type:Boolean,default:!0},columnCellClassName:Function,onRowClick:Function,rowMouseEnter:Function,rowMouseLeave:Function,cellEditDone:Function,cellEditFormatter:Function,cellMerge:Function},computed:{getTableHeight:function(){return this.isTableEmpty?this.tableEmptyHeight:this.internalHeight},leftViewWidth:function(){var e=0;return this.frozenCols&&this.frozenCols.length>0&&(e=this.frozenCols.reduce(function(e,t){return e+t.width},0)),e},rightViewWidth:function(){return this.internalWidth-this.leftViewWidth-2},bodyViewHeight:function(){return this.internalTitleRows.length>0?this.internalHeight-this.titleRowHeight*(this.internalTitleRows.length+this.getTitleRowspanTotalCount):this.internalHeight-this.titleRowHeight},titleRowsToSortInfo:function(){var e=[];return this.internalTitleRows.length>0&&this.internalTitleRows.filter(function(t){t.filter(function(t,i){"string"==typeof t.orderBy&&1===t.fields.length&&(t.field=t.fields[0],e.push(t))})}),e},totalColumnsWidth:function(){return this.internalColumns.reduce(function(e,t){return t.width?e+t.width:e},0)},getColumnsFields:function(){return this.internalColumns.map(function(e){return e.field})},getNoFrozenColumnsFields:function(){return this.internalColumns.filter(function(e){return!e.isFrozen}).map(function(e){return e.field})},getFrozenColumnsFields:function(){return this.internalColumns.filter(function(e){return e.isFrozen}).map(function(e){return e.field})}},methods:{customCompFunc:function(e){this.$emit("on-custom-comp",e)},setRowHoverColor:function(e){if(this.rowHoverColor&&this.rowHoverColor.length>0&&e)return{"background-color":this.rowHoverColor}},setRowClickColor:function(e){if(this.rowClickColor&&this.rowClickColor.length>0&&e)return{"background-color":this.rowClickColor}},trBgColor:function(e){if(this.evenBgColor&&this.evenBgColor.length>0||this.oddBgColor&&this.oddBgColor.length>0)return e%2==0?{"background-color":this.evenBgColor}:{"background-color":this.oddBgColor}},handleMouseEnter:function(e){this.internalTableData[e].__mouseenter__=!0,this.rowMouseEnter&&this.rowMouseEnter(e)},handleMouseOut:function(e){this.internalTableData[e].__mouseenter__=!1,this.rowMouseLeave&&this.rowMouseLeave(e)},setColumnCellClassName:function(e,t,i){return this.columnCellClassName&&this.columnCellClassName(e,t,i)},onCellClick:function(e,t,i){if(Array.isArray(this.internalTableData)&&this.internalTableData.length>0){var l=this.internalTableData.find(function(e){return e.__columnCellClick__});l&&(l.__columnCellClick__=!1),this.internalTableData[e].__columnCellClick__=!0}this.onRowClick&&this.onRowClick(e,t,i)},titleColumnWidth:function(e){var t=0;Array.isArray(e)?t=this.internalColumns.filter(function(t,i){return e.some(function(e){return e===t.field})}).reduce(function(e,t){return e+t.width},0):console.error(this.errorMsg+"the fields attribute must be a array in titleRows");return t},titleColumnHeight:function(e){return e&&e>0?this.titleRowHeight*e:this.titleRowHeight},overflowTitle:function(e,t){var i="";if("function"==typeof t.formatter){var l=t.formatter(e,-1);i=_utils2.default.isHtml(l)?"":l}else i=e[t.field];return i},getTotalColumnsHeight:function(){return(this.internalTitleRows&&this.internalTitleRows.length>0?this.titleRowHeight*this.internalTitleRows.length:this.titleRowHeight)+this.internalTableData.length*this.rowHeight+1},initTableWidth:function(){this.internalWidth=this.isHorizontalResize?this.maxWidth:this.width},initColumns:function(){this.internalHeight=this.height,this.internalColumns=Array.isArray(this.columns)?(0,_deepClone2.default)(this.columns):[],this.internalTitleRows=Array.isArray(this.titleRows)?(0,_deepClone2.default)(this.titleRows):[],this.initResizeColumns(),this.hasFrozenColumn=this.internalColumns.some(function(e){return e.isFrozen}),this.initTableWidth();var e=this,t=0;e.internalWidth&&e.internalWidth>0&&e.internalColumns.map(function(i){i.width&&i.width>0||(t++,e.isHorizontalResize?console.error(e.errorMsg+"If you are using the isHorizontalResize property,Please set the value for each column's width"):i.width=e.internalWidth-e.totalColumnsWidth-2)}),t>1&&console.error(this.errorMsg+"Only allow one column is not set width")},initView:function(){var e=this;e.internalWidth&&e.internalWidth>0||e.columns&&e.columns.length>0&&(e.internalWidth=e.columns.reduce(function(e,t){return e+t.width},0)+2);var t=e.getTotalColumnsHeight();if(e.height&&e.height>0)if(e.height>t){if(e.$el){var i=e.$el.querySelector(".v-table-rightview .v-table-body"),l=e.$el.querySelector(".v-table-rightview .v-table-body .v-table-btable");i.clientWidth+2<l.clientWidth&&(t+=_utils2.default.getScrollbarWidth()),e.internalHeight=t}}else e.height<=t&&(e.internalHeight=e.height);else e.internalHeight=t},initInternalTableData:function(e){var t=Array.isArray(this.tableData)?(0,_deepClone2.default)(this.tableData):[];return t.length>0&&t.map(function(e){e.__mouseenter__=!1,e.__columnCellClick__=!1}),t},resize:function(){var e=this;this.$nextTick(function(t){e.tableResize()})}},created:function(){var e=this;this.internalTableData=this.initInternalTableData(this.tableData),Array.isArray(this.columns)&&this.columns.length>0&&this.initColumns(),this.$nextTick(function(t){e.initView()}),this.resize()},mounted:function(){this.tableEmpty(),Array.isArray(this.tableData)&&this.tableData.length>0&&(this.scrollControl(),this.hasBindScrollEvent=!0),this.singelSortInit()},watch:{columns:function(e){this.initColumns()},titleRows:function(e){this.initColumns()},tableData:function(e){this.internalTableData=this.initInternalTableData(e),this.tableEmpty(),Array.isArray(e)&&e.length>0&&(this.initView(),this.hasBindScrollEvent||this.scrollControl()),this.resize()}}};